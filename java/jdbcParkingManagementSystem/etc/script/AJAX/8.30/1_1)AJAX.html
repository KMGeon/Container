<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <!-- AXAJ : 비동기 스크립트 XML
         아주 중요함 -->

    <script>
      //    대표적인 비동기 함수. 2번이 실행되고 1번이 나중에 실행된다.
      //    비동기의 장점 : 효율적이다(성능이 좋다.)
      //   setTimeout(() => {
      //     alert("1번 뜨기");
      //   }, 1000);
      //   alert("2번 찍기");

      //   AJAX 등장
      // 90년말 부터 00년 초까지 인터넷을 바탕으로 전자상거래가 발전하지만
      // 네트워크 속도가 느려서 더 빨리 움직이는 프로그램을 원했다.
      // 그래서 Form 태그 전송방식은 낭비라고 생각 (이유 : 페이지의 일부분만 고치려 해도 해당 페이지를
      // 전부 다시 읽어야 함을 지적)
      // -> 그래서 AJAX가 나왔지만 아무도 신뢰하지 않음
      //(서버와 비동기로 데이터만 주고받고, 화면 제어는 자바스크립트로 하자)
      // 그 이후에 구글이 AJAX를 이용하여 구글맵을 완벽하게 구현하고 성능이 좋아져서

      //  http를 통하여 쉽게 데이터를 받을 수 있게 해주는 오브젝트 제공
      //  전역변수 보다는 필요할 때 마다 FUNCTION안에서 지역변수 생성해서 사용이 좋다.
      var v_ajax = new XMLHttpRequest();

      //1.일을 지정한다.
      v_ajax.open("get", "Dummy.txt", "true");
      // 통신 메소드 : get , post , put , delete ...
      //  디폴트 : true

      // 3.통신 결과를 받으려면 통신이 끝나야 받을 수 있음
      // 이벤트로 알려줌, 통신준비중 , 데이터전송중 , 끝났음
      v_ajax.onreadystatechange = function () {
        // 통신 중간은 관심 x , 중요한건 통신이 끝났는지 아닌지 중요
        if (v_ajax.readyState == 4 && v_ajax.status == 200) {
          // 통신만 끝났다고 하는 건 신뢰가 부족 그래서 서버의 응답코드도 잘 응답했다는 코드가 필요
          alert(v_ajax.responseText);
        }
      };

      // 2.일을 시킨다.
      //   할일이 너무 짧으면 일부 이벤트를 노칠수 있어서 보통 이벤트 등록을 먼저함
      v_ajax.send();
    </script>
  </body>
</html>

<!--

    *AJAX 기본틀
    
var v_ajax = new XMLHttpRequest();
v_ajax.open("get", "Dummy.txt", "true");
v_ajax.onreadystatechange = function () {
    if (this.readyState == 4 && this.status == 200) {
        alert(v_ajax.responseText);
    }
};
v_ajax.send();
 -->
